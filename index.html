<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Funny Prank App</title>

<link rel="manifest" href="manifest.json">

<style>
body{
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#ff9a9e,#fad0c4);
    text-align:center;
    padding-top:80px;
    margin:0;
}
.box{
    background:#fff;
    padding:25px;
    border-radius:15px;
    width:90%;
    max-width:360px;
    margin:auto;
    box-shadow:0 10px 25px rgba(0,0,0,.2);
}
input{
    padding:12px;
    width:95%;
    margin-bottom:15px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:16px;
}
button{
    padding:12px;
    width:50%;
    border:none;
    border-radius:8px;
    background:#ff4b5c;
    color:#fff;
    font-size:16px;
}
</style>
</head>

<body>

<div class="box">
    <h2>Enter Your Name ðŸ˜Ž</h2>
    <input id="username" placeholder="Apna naam likho">
    <br>
    <button onclick="handleClick()">Next</button>
</div>

<script>
// -------------------
// SERVICE WORKER REGISTER
// -------------------
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
}

// -------------------
// NOTIFICATION PERMISSION
// -------------------
if ("Notification" in window && Notification.permission !== "granted") {
    Notification.requestPermission();
}

// -------------------
// LOGIC
// -------------------
let kainatFirstTime = true;
let kainatSpam = 0;
let lastClick = 0;

function handleClick(){
    let name = username.value.trim();
    let now = Date.now();

    if(!name){
        alert("Pehle naam likho ðŸ˜‚");
        return;
    }

    let msg = "";

    if(name.toLowerCase() === "kainat"){
        if(now - lastClick < 1000){
            kainatSpam++;
            if(kainatSpam >= 5){
                msg = "ðŸ˜¤ Ary bajii web crash karo gi kya!";
            }else{
                msg = "ðŸš— Web hai horn nahi jo baar baar daba rahi ho ðŸ˜‚";
            }
        }else if(kainatFirstTime){
            msg = "ðŸ˜œ Ye bauny logon ke liye nahi hai!";
            kainatFirstTime = false;
            kainatSpam = 0;
        }
    }

    if(msg === ""){
        let arr = [
            "You missed free biryani ðŸ›",
            "Battery 1% ðŸ”‹",
            "FBI is watching you ðŸš¨",
            "Wallet empty ðŸ’¸",
            "Internet 2G ðŸ¢"
        ];
        msg = arr[Math.floor(Math.random()*arr.length)];
    }

    lastClick = now;

    if(Notification.permission === "granted"){
        navigator.serviceWorker.ready.then(reg=>{
            reg.showNotification("Funny Prank ðŸ˜ˆ",{
                body: msg,
                icon: "icon-192.png",
                badge: "icon-192.png",
                vibrate: [300,150,300],
                requireInteraction: true
            });
        });
    }
}
</script>

</body>
</html>
